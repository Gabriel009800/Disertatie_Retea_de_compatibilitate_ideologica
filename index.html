<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-gb" lang="en" xmlns:og="http://opengraphprotocol.org/schema/" xmlns:fb="http://www.facebook.com/2008/fbml" itemscope itemtype="http://schema.org/Map">

<head>
<title>OII Network Visualisation Example</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,height=device-height,initial-scale=1,user-scalable=no" />
<meta http-equiv="X-UA-Compatible" content="IE=Edge" />


<!--[if IE]><script type="text/javascript" src="js/excanvas.js"></script><![endif]--> <!-- js/default.js -->
  <script src="js/jquery/jquery.min.js" type="text/javascript"></script>
  <script src="js/sigma/sigma.min.js" type="text/javascript" language="javascript"></script>	
    <script src="js/sigma/sigma.parseJson.js" type="text/javascript" language="javascript"></script>


<script type="text/javascript">
  // ForÈ›eazÄƒ toate curbele sÄƒ se â€Ã®ndoaieâ€ spre interiorul cercului
  (function () {
    // AsigurÄƒm namespace-ul
    sigma.utils && sigma.utils.pkg && sigma.utils.pkg('sigma.canvas.edges');

    function drawCurvedInward(edge, source, target, context, settings) {
      var prefix = settings('prefix') || '';
      // Coordonatele deja Ã®n spaÈ›iul camerei:
      var sx = source[prefix + 'x'],
          sy = source[prefix + 'y'],
          tx = target[prefix + 'x'],
          ty = target[prefix + 'y'];

      var dx = tx - sx, dy = ty - sy;
      var dist = Math.sqrt(dx*dx + dy*dy) || 1;

      // Punctul median
      var mx = (sx + tx) / 2,
          my = (sy + ty) / 2;

      // NormalÄƒ (perpendicularÄƒ) pe segment
      var nx = -dy / dist,
          ny =  dx / dist;

      // Centrul canvasului (nu al grafului) â€“ pentru a decide â€interior/exteriorâ€
      var cx = context.canvas.width  / 2,
          cy = context.canvas.height / 2;

      // Vector de la centru la mijlocul muchiei
      var vx = mx - cx,
          vy = my - cy;

      // DacÄƒ proiecÈ›ia pe normala curentÄƒ e pozitivÄƒ, Ã®ntoarcem sensul (spre interior)
      var inwardSign = (nx * vx + ny * vy) > 0 ? -1 : 1;

      // Factor de curburÄƒ (regleazÄƒ-l dupÄƒ gust: 0.10â€“0.30)
      var k = 0.20;
      var cpx = mx + nx * inwardSign * k * dist;
      var cpy = my + ny * inwardSign * k * dist;

      // DesenÄƒm curba
      context.strokeStyle = edge.color || settings('defaultEdgeColor') || '#999';
      context.lineWidth  = edge[prefix + 'size'] || settings('defaultEdgeSize') || 1;
      context.beginPath();
      context.moveTo(sx, sy);
      context.quadraticCurveTo(cpx, cpy, tx, ty);
      context.stroke();
    }

    // Suprascriem tipul â€curveâ€ cu varianta noastrÄƒ â€spre interiorâ€
    sigma.canvas.edges.curve = drawCurvedInward;

    // DacÄƒ ai muchii de tip â€curvedArrowâ€, le facem È™i pe ele sÄƒ foloseascÄƒ aceeaÈ™i geometrie
    // (fÄƒrÄƒ vÃ¢rf de sÄƒgeatÄƒ; putem adÄƒuga vÃ¢rf ulterior dacÄƒ vrei)
    sigma.canvas.edges.curvedArrow = drawCurvedInward;
  })();
</script>


	
  <script src="js/fancybox/jquery.fancybox.pack.js" type="text/javascript" language="javascript"></script>
  <script src="js/main.js" type="text/javascript" language="javascript"></script>




<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    var t = setInterval(function () {
      if (window.sigInst && sigInst.iterEdges) {
        // ForÈ›eazÄƒ tipul muchiilor la â€curveâ€, ca sÄƒ prindÄƒ override-ul nostru
        sigInst.iterEdges(function (e) {
          e.attr = e.attr || {};
          e.attr.type = 'curve';   // dacÄƒ aveai 'curvedArrow', Ã®l poÈ›i lÄƒsa; am suprascris È™i pe acela
        });
        sigInst.draw(2,2,2,2);
        clearInterval(t);
      }
    }, 150);
  });
</script>


<script type="text/javascript">
document.addEventListener("DOMContentLoaded", function () {
  var t = setInterval(function () {
    if (window.sigInst && sigInst._core && sigInst._core.plotter) {

      // ğŸ”¹ 1. ForÈ›eazÄƒ toate muchiile sÄƒ fie curbate
      sigInst.iterEdges(function(e) {
        e.attr = e.attr || {};
        e.attr.type = 'curvedArrow';  // menÈ›inem tipul curbat
      });

      // ğŸ”¹ 2. Rescriem funcÈ›ia care deseneazÄƒ curbele â†’ sÄƒ se Ã®ndoaie spre interior
      const plotter = sigInst._core.plotter;
      const original = plotter.curvedArrow;

      plotter.curvedArrow = function(ctx, x1, y1, x2, y2, sz, color, type, size) {
        // calculÄƒm punctul median
        var dx = x2 - x1;
        var dy = y2 - y1;
        var dist = Math.sqrt(dx*dx + dy*dy);
        var mx = (x1 + x2) / 2;
        var my = (y1 + y2) / 2;

        // vector normal (perpendicular)
        var normal = { x: -dy / dist, y: dx / dist };

        // ğŸ”¹ factorul de curburÄƒ â€” NEGATIV Ã®nseamnÄƒ "spre interior"
        var curvature = -0.25 * dist;
        mx += normal.x * curvature;
        my += normal.y * curvature;

        // desenÄƒm linia curbatÄƒ (fÄƒrÄƒ sageti)
        ctx.beginPath();
        ctx.moveTo(x1, y1);
        ctx.quadraticCurveTo(mx, my, x2, y2);
        ctx.strokeStyle = color;
        ctx.lineWidth = size || 1;
        ctx.stroke();
      };

      // ğŸ”¹ redeseneazÄƒ reÈ›eaua
      sigInst.draw(2, 2, 2, 2);
      clearInterval(t);
    }
  }, 200);
});
</script>


	

<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    var t = setInterval(function () {
      if (window.sigInst && sigInst._core && sigInst._core.plotter) {
        // RedefineÈ™te funcÈ›ia care deseneazÄƒ muchii curbate
        sigInst._core.plotter.curvedArrow = function (ctx, x1, y1, x2, y2, sz, color, type, size) {
          var dx = x2 - x1;
          var dy = y2 - y1;
          var dist = Math.sqrt(dx*dx + dy*dy);
          var mx = (x1 + x2) / 2;
          var my = (y1 + y2) / 2;

          // Ãn loc sÄƒ bombÄƒm Ã®n afarÄƒ, bombÄƒm invers (spre interior)
          var normal = { x: -dy / dist, y: dx / dist };
          var curvature = -0.15 * dist; // semnul negativ = curbÄƒ spre interior
          mx += normal.x * curvature;
          my += normal.y * curvature;

          ctx.beginPath();
          ctx.moveTo(x1, y1);
          ctx.quadraticCurveTo(mx, my, x2, y2);
          ctx.strokeStyle = color;
          ctx.lineWidth = size;
          ctx.stroke();
        };
        clearInterval(t);
      }
    }, 100);
  });
</script>


	



<script type="text/javascript">
  document.addEventListener("DOMContentLoaded", function () {
    var t = setInterval(function () {
      if (window.sigInst && sigInst._core && sigInst._core.domElements) {
        // ğŸ”¹ Ascunde doar etichetele "de bazÄƒ" (cele care apar mereu)
        if (sigInst._core.domElements.labels)
          sigInst._core.domElements.labels.style.display = "none";

        // ğŸ”¹ PÄƒstreazÄƒ hoverul activ (nu mai ascundem .hovers)
        // DacÄƒ a fost dezactivat anterior, Ã®l reactivÄƒm:
        if (sigInst._core.plotter && sigInst._core.plotter.drawHoverNode == null) {
          delete sigInst._core.plotter.drawHoverNode;
        }

        clearInterval(t);
      }
    }, 50);
  });
</script>


	
	<style>
canvas.labels {
  display: none !important;
}
</style>


  <link rel="stylesheet" type="text/css" href="js/fancybox/jquery.fancybox.css"/>
  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" />
  <link rel="stylesheet" media="screen and (max-height: 770px)" href="css/tablet.css" />
</head>


<body>
  <div class="sigma-parent">
    <div class="sigma-expand" id="sigma-canvas"></div>
  </div>
<div id="mainpanel">
  <div class="col">
		<div id="maintitle" style="margin-top:-60px;"></div>
    <div id="title"></div>
    <div id="titletext"></div>
    <div class="info cf">
      <dl>
        <dt class="moreinformation"></dt>
        <dd class="line"><a href="#information" class="line fb">Mai multe despre acest proiect</a></dd>
      </dl>
    </div>
<div id="legend">
	<div class="box">
	
	</div>
</div> 
    <div class="b1">
    <form>
      <div id="search" class="cf"><h2>Search:</h2>
        <input type="text" name="search" value="Search by name" class="empty"/><div class="state"></div>
        <div class="results"></div>
      </div>
      <div class="cf" id="attributeselect"><h2>Group Selector:</h2>
        <div class="select">Select Group</div>
	<div class="list cf"></div>
      </div>
    </form>
    </div>
  </div>




	
<div id="information" style="display:none;max-width:600px;">
 <h2 style="margin-bottom:15px;">Despre acest proiect</h2>
  <p>
    AceastÄƒ vizualizare a fost realizatÄƒ Ã®n <b>Gephi 0.10.1</b>. ReÈ›eaua prezintÄƒ conexiunile de trafic dintre site-urile romÃ¢neÈ™ti,
    grupate pe clustere ideologice (mainstream, pseudoÈ™tiinÈ›e, anti-sistem, naÈ›ionalist, fundamentalist).
  </p>
  <p>
    Analiza este parte a unui proiect de cercetare privind <i>rezistenÈ›a la manipulare Ã®n spaÈ›iul digital</i>.
  </p>
  <p>
    Autor: <b>Marin Gabriel</b> <br/>
  </p>
</div>




	

	<div id="copyright">
		<a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="images/CC.png" /></a></div>
	</div>
<div id="attributepane">
<div class="text">
	<div title="Close" class="left-close returntext"><div class="c cf"><span>Return to the full network</span></div></div>	
<div class="headertext">
	<span>Information Pane</span>
</div>	
  <div class="nodeattributes">
    <div class="name"></div>
	<div class="data"></div>
    <div class="p">Connections:</div>
    <div class="link">
      <ul>
      </ul>
    </div>
  </div>
	</div>
</div>
<div id="developercontainer">
	<a href="http://www.oii.ox.ac.uk" title="Oxford Internet Institute"><div id="oii"><span>OII</span></div></a>
	<a href="http://jisc.ac.uk" title="JISC"><div id="jisc"><span>JISC</span></div></a>	
</div>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-21293169-4']);
  _gaq.push(['_setDomainName', 'none']);
  _gaq.push(['_setAllowLinker', true]);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>




	<div class="legend" style="
    position: fixed;
    bottom: 20px;
    left: 20px;
    background: rgba(255,255,255,0.9);
    padding: 12px 18px;
    border-radius: 12px;
    box-shadow: 0 0 10px rgba(0,0,0,0.25);
    font-family: 'Segoe UI', sans-serif;
    font-size: 13px;
    line-height: 1.5;
    z-index: 9999;
">
  <b>LegendÄƒ â€“ Clustere ideologice</b><br>
  <div><span style="background:#150C45;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>Chatbot</div>
  <div><span style="background:#0911FF;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>Om È™i societate. Oficial</div>
  <div><span style="background:#00F0E1;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>Om È™i societate. Moderat</div>
  <div><span style="background:#BF8002;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>Om È™i societate. NaÈ›ionalist</div>
  <div><span style="background:#01B32C;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>Religios. Oficial</div>
  <div><span style="background:#2DEB3C;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>Religios. Moderat</div>
  <div><span style="background:#FFAE4D;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>Religios. Fundamentalist</div>
  <div><span style="background:#8897FF;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>È˜tiri. Mainstream</div>
  <div><span style="background:#FF454C;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>È˜tiri. Anti-sistem</div>
  <div><span style="background:#E3A3D9;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>PseudoÈ™tiinÈ›e. BioenergopaÈ›i</div>
  <div><span style="background:#E303E0;display:inline-block;width:14px;height:14px;margin-right:6px;border-radius:3px;"></span>PseudoÈ™tiinÈ›e. ConspiraÈ›ii</div>
</div>
</body>
</html>
	
